# DeDuBa C/C++ Code Formatting Configuration
#
# This configuration specifies the exact formatting rules for the DeDuBa project.
# Based on LLVM style with custom adjustments for consistency across platforms.
#
# Key principles:
#  - 2-space indentation for clarity and consistency
#  - Pointer alignment with identifier: ValueT *value (not ValueT* value)
#  - Line length limit of 100 characters
#  - Braces attached to signatures
#  - Strict alignment of declarations for readability
---
# Core formatting style
BasedOnStyle: LLVM

# Indentation settings (aligned with C# settings)
IndentWidth: 4
TabWidth: 4
UseTab: Never
IndentCaseLabels: false
IndentGotoLabels: false
IndentAccessModifiers: false

# Line length and column settings (aligned with C# printWidth)
ColumnLimit: 120
ContinuationIndentWidth: 4

# Brace and statement formatting
BreakBeforeBraces: Attach
AllowShortBlocksOnASingleLine: false
AllowShortFunctionsOnASingleLine: Inline
AllowShortIfStatementsOnASingleLine: false
AllowShortLambdasOnASingleLine: Inline
AllowShortLoopsOnASingleLine: false

# Pointer and reference alignment
PointerAlignment: Right
ReferenceAlignment: Right
DerivePointerAlignment: false

# Spacing around operators and keywords
SpaceBeforeParens: ControlStatements
SpaceAfterCStyleCast: false
SpaceAroundPointerQualifiers: Default
SpacesBeforeTrailingComments: 2
SpacesInSquareBrackets: false
SpacesInCStyleCastParentheses: false
SpacesInParentheses: false
SpaceInEmptyBlock: false
SpaceInEmptyParentheses: false

# Alignment settings
AlignConsecutiveDeclarations: true
AlignConsecutiveAssignments: false
AlignConsecutiveMacros: false
AlignEscapedNewlines: Right
AlignOperands: Align
AlignTrailingComments: true

# Namespace and scope indentation
NamespaceIndentation: Inner
CompactNamespaces: false

# Comment handling
ReflowComments: true
CommentPragmas: "^ IWYU pragma:"

# Include sorting
IncludeBlocks: Preserve

# Penalties for line breaking
PenaltyReturnTypeOnItsOwnLine: 0
PenaltyBreakAssignment: 10
PenaltyBreakComment: 100
PenaltyExcessCharacter: 1000

# C++ specific
Standard: Latest
Cpp11BracedListStyle: true
SpaceAfterLogicalNot: false

# Line breaking
BinPackArguments: false
BinPackParameters: false
BreakBeforeConceptDeclarations: true
BreakConstructorInitializers: BeforeColon
BreakInheritanceList: BeforeColon
# Notes on version compatibility
# Standard and Language were removed to support older clang-format versions
# (some CI environments may not have the latest version). The repo targets
# modern C++17/C++20 standards as specified in CMakeLists.txt and Directory.Build.props.
# Formatter version compatibility: tested with clang-format 16.0.3 and 18.0.x
